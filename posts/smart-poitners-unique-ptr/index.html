<!DOCTYPE html><html lang="fa-IR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="اشاره گر های هوشمند: unique_ptr" /><meta name="author" content="سیدپولر" /><meta property="og:locale" content="fa_IR" /><meta name="description" content="موضوع اشاره گر ها همیشه یکی از چالش های زبان هایی مثل سی و سی++ بوده. اینکه یه حافظه ای رو از سیستم بگیریم، آزادش کنیم و مراقب باشیم که حافظه ای که گرفته شده معتبر باشه تا برای استفاده کردن ازش یا آزاد کردنش مشکلی پیش نیاد و هزارتا چیز دیگه." /><meta property="og:description" content="موضوع اشاره گر ها همیشه یکی از چالش های زبان هایی مثل سی و سی++ بوده. اینکه یه حافظه ای رو از سیستم بگیریم، آزادش کنیم و مراقب باشیم که حافظه ای که گرفته شده معتبر باشه تا برای استفاده کردن ازش یا آزاد کردنش مشکلی پیش نیاد و هزارتا چیز دیگه." /><link rel="canonical" href="https://www.seedpuller.ir/posts/smart-poitners-unique-ptr/" /><meta property="og:url" content="https://www.seedpuller.ir/posts/smart-poitners-unique-ptr/" /><meta property="og:site_name" content="سیدپولر" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-08-26T00:00:00+04:30" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="اشاره گر های هوشمند: unique_ptr" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@سیدپولر" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"سیدپولر"},"description":"موضوع اشاره گر ها همیشه یکی از چالش های زبان هایی مثل سی و سی++ بوده. اینکه یه حافظه ای رو از سیستم بگیریم، آزادش کنیم و مراقب باشیم که حافظه ای که گرفته شده معتبر باشه تا برای استفاده کردن ازش یا آزاد کردنش مشکلی پیش نیاد و هزارتا چیز دیگه.","url":"https://www.seedpuller.ir/posts/smart-poitners-unique-ptr/","@type":"BlogPosting","headline":"اشاره گر های هوشمند: unique_ptr","dateModified":"2020-08-26T00:00:00+04:30","datePublished":"2020-08-26T00:00:00+04:30","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.seedpuller.ir/posts/smart-poitners-unique-ptr/"},"@context":"https://schema.org"}</script><title>اشاره گر های هوشمند: unique_ptr | سیدپولر</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/24620298?s=460&u=dd6165c7d8103164b24d6f40a169594a2c8dac42&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">سیدپولر</a></div><div class="site-subtitle font-italic">نوشته های مور دانه‌کش</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/SeedPuller" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['SeedPuller','gmail.com'].join('@')" aria-label="email" class="order-4" > <i class="fas fa-envelope"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>اشاره گر های هوشمند: unique_ptr</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8" style="direction: rtl; text-align: right;"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip style="direction: rtl; text-align: right;">اشاره گر های هوشمند: unique_ptr</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Aug 26, 2020, 12:00 AM +0430" > Aug 26, 2020 <i class="unloaded">2020-08-26T00:00:00+04:30</i> </span> توسط <span class="author"> سیدپولر </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="حاوی 1493 کلمه"> 8 دقیقه</span></div></div><div class="post-content"><p>موضوع اشاره گر ها همیشه یکی از چالش های زبان هایی مثل سی و سی++ بوده. اینکه یه حافظه ای رو از سیستم بگیریم، آزادش کنیم و مراقب باشیم که حافظه ای که گرفته شده معتبر باشه تا برای استفاده کردن ازش یا آزاد کردنش مشکلی پیش نیاد و هزارتا چیز دیگه.</p><p>اشاره گر های هوشمند اومدن تا کار مارو راحت کنن. تا دیگه کمتر ذهن برنامه نویس درگیر امنیت اشاره گر ها و مسائل دیگه باشه.</p><p>بنابراین یکی از ارکان سی++ مدرن میتونه استفاده از اشاره‌گر های هوشمند باشه.</p><p>توی این پست راجع به کلاس <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;unique_ptr</code></span>&rlm; و make_unique می‌نویسم که <a href="https://seedpuller.space/2020/07/27/deitel-chapter17-exception-handling/">قبلا یه اشاره های ریزی بهش کرده بودم</a>.</p><h2 id="چرا-از-اشارهگر-هوشمند-استفاده-کنیم">چرا از اشاره‌گر هوشمند استفاده کنیم</h2><p>به این قطعه کد دقت کنید:</p><div class="language-cpp highlighter-rouge"><div class="highlight" style="direction: ltr; text-align: left;"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
</span>  
<span class="kt">void</span> <span class="nf">someFunction</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="o">*</span><span class="n">ptr</span><span class="p">{</span> <span class="k">new</span> <span class="n">Resource</span><span class="p">()</span> <span class="p">};</span>
  
    <span class="kt">int</span> <span class="n">x</span><span class="p">{};</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Enter an integer: "</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cin</span> <span class="o">&gt;&gt;</span> <span class="n">x</span><span class="p">;</span>
  
    <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">throw</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// the function returns early, and ptr won’t be deleted!</span>
  
    <span class="c1">// do stuff with ptr here</span>
  
    <span class="k">delete</span> <span class="n">ptr</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></span>&rlm;</div></div><p>مشکلی که هست اینه که اگر x = 0 اونوقت یک exception پرتاب میشه و همونجا کار تابع تموم میشه بنابراین برنامه هیچوقت به اون خطی که در اون <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;delete</code></span>&rlm; نوشته شده نمیرسه و اینجا memory leak یا نشت حافظه رخ میده.</p><p>شاید بگیم خب این یک موضوع ساده‌ست و میشه قبل از پرتاب کردن استثنا، بیایم و حافظه رو پاک کنیم. خب این یه کار اضافه برای برنامه نویسه. سخته که برنامه نویس همش حواسش باشه که کجا حافظه گرفته و کجا آزادش نکرده.</p><p>اگر میشد حافظه پویایی که اشاره گر ها بهش اشاره می‌کنن هم مثل متغییر ها و اشیاء معمولی که وقتی out of scope میشن ازبین میرن، آزاد بشن خیلی خوب میشد.</p><p>ایده اشاره گر های هوشمند هم همینه. یک شئ از یک کلاس ساخته میشه که وظیفه‌ش نگهداری از حافظه گرفته شده‌ست. همونطور که می‌دونیم وقتی اشیاء out of scope می‌شن، ازبین میرن و تابع destructor اونها صدا زده میشه. پس فقط کافیه که این کلاس ما در دیستراکتور خودش بیاد و حافظه ای که گرفته شده رو <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;delete</code></span>&rlm; کنه.</p><h2 id="استفاده-از-unique_ptr">استفاده از unique_ptr</h2><p>تا قبل از سی++ ۱۱ کلاسی به اسم auto_ptr وجود داشت که خیلی مزخرف بود. سی++ ۱۱ با معرفی unique_ptr اومد و کلاس قبلی رو منسوخ کرد و کلاس auto_ptr توی سی++ ۱۷ به کلی حذف شد.</p><p>این کلاس اوپراتور های ستاره(*) و <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;-&gt;</code></span>&rlm; رو overload کرده بنابراین میشه تقریبا مثل پوینتر معمولی ازش استفاده کرد.</p><p>یک مثال ساده از unique_ptr :</p><div class="language-cpp highlighter-rouge"><div class="highlight" style="direction: ltr; text-align: left;"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
#include &lt;memory&gt; // for std::unique_ptr
</span>  
<span class="k">class</span> <span class="nc">Resource</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Resource</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Resource acquired</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Resource</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Resource destroyed</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
  
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// allocate a Resource object and have it owned by std::unique_ptr</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Resource</span><span class="o">&gt;</span> <span class="n">res</span><span class="p">{</span> <span class="k">new</span> <span class="n">Resource</span><span class="p">()</span> <span class="p">};</span>
  
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> <span class="c1">// res goes out of scope here, and the allocated Resource is destroyed</span>
</pre></table></code></span>&rlm;</div></div><p>چون شئ ما روی استک ساخته میشه، وقتی که تابع به اتمام میرسه تمام متغییرها/اشیاء از بین میرن و به این ترتیب تابع دیستراکتور این کلاس میاد و حافظه ای که گرفته شده رو آزاد می‌کنه. بدون اینکه نیاز باشه ما نگرانی خاصی بابت آزاد شدنش داشته باشیم.</p><h2 id="مالکیت-اشاره-گر-در-unique_ptr">مالکیت اشاره گر در unique_ptr</h2><p>این امکان موجود نیست که دو شئ از <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;unique_ptr</code></span>&rlm; یک اشاره گر مشترک رو مدیریت کنند. به همین دلیل این کلاس توابع مربوط به کپی رو غیرفعال کرده.</p><p>بنابراین برای اینکه محتوای یک شئ از <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;unique_ptr</code></span>&rlm; رو برابر با شئ دیگری از همین کلاس قرار بدیم باید دوتا نکته رو مدنظر داشته باشیم:</p><ul><li>باید از move semantics استفاده بکنیم. بنابراین اگر مقدار ما r-value نیست باید از <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;std::move</code></span>&rlm; استفاده بکنیم.<li>بعد از اینکار، شئ اولیه ما (که در سمت راست علامت مساوی قرار میگیره) دیگه مسئول مدیریت اون اشاره گر نیست و یک شئ خالی محسوب میشه.</ul><p>مثال:</p><div class="language-cpp highlighter-rouge"><div class="highlight" style="direction: ltr; text-align: left;"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;iostream&gt;
#include &lt;memory&gt; // for std::unique_ptr
</span>  
<span class="k">class</span> <span class="nc">Resource</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Resource</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Resource acquired</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Resource</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Resource destroyed</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
  
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Resource</span><span class="o">&gt;</span> <span class="n">res1</span><span class="p">{</span> <span class="k">new</span> <span class="n">Resource</span><span class="p">{}</span> <span class="p">};</span> <span class="c1">// Resource created here</span>
    <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Resource</span><span class="o">&gt;</span> <span class="n">res2</span><span class="p">{};</span> <span class="c1">// Start as nullptr</span>
  
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"res1 is "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">res1</span><span class="p">)</span> <span class="o">?</span> <span class="s">"not null</span><span class="se">\n</span><span class="s">"</span> <span class="o">:</span> <span class="s">"null</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"res2 is "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">res2</span><span class="p">)</span> <span class="o">?</span> <span class="s">"not null</span><span class="se">\n</span><span class="s">"</span> <span class="o">:</span> <span class="s">"null</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
  
    <span class="c1">// res2 = res1; // Won't compile: copy assignment is disabled</span>
    <span class="n">res2</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">res1</span><span class="p">);</span> <span class="c1">// res2 assumes ownership, res1 is set to null</span>
  
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Ownership transferred</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
  
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"res1 is "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">res1</span><span class="p">)</span> <span class="o">?</span> <span class="s">"not null</span><span class="se">\n</span><span class="s">"</span> <span class="o">:</span> <span class="s">"null</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"res2 is "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">(</span><span class="n">res2</span><span class="p">)</span> <span class="o">?</span> <span class="s">"not null</span><span class="se">\n</span><span class="s">"</span> <span class="o">:</span> <span class="s">"null</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
  
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> <span class="c1">// Resource destroyed here when res2 goes out of scope</span>
</pre></table></code></span>&rlm;</div></div><p>نتیجه این کد به این صورته:</p><div class="language-plaintext highlighter-rouge"><div class="highlight" style="direction: ltr; text-align: left;"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>Resource acquired
res1 is not null
res2 is null
Ownership transferred
res1 is null
res2 is not null
Resource destroyed
</pre></table></code></span>&rlm;</div></div><h2 id="unique_ptr-و-آرایه-ها">unique_ptr و آرایه ها</h2><p>خوشبختانه این کلاس میتونه تشخیص بده که چه زمانی باید از<span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm; delete[]</code></span>&rlm; استفاده کنه و چه زمانی از <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;delete</code></span>&rlm; و همچنین باهاش میشه آرایه هم ساخت.</p><h2 id="stdmake_unique">std::make_unique</h2><p>این کلاس که توی سی++ ۱۴ اضافه شده این امکان رو فراهم کرده که به سادگی با <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;unique_ptr</code></span>&rlm; کار کنیم و همچنین از مشکلات احتمالی مثل exception safety و یا تغییر ناخواسته اشاره گر اصلی(که کلاس <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;unique_ptr</code></span>&rlm; داره ازش نگهداری می‌کنه) جلوگیری می‌کنه.</p><p>فقط کافیه بهش اسم اون type ای که قراره براش حافظه بگیریم رو به عنوان آرگومان های تمپلیت بهش بدیم و همچنین آرگومان هایی که میخوایم موقع ساختن اون type بهش داده بشه رو به عنوان آرگومان های تابعی به این کلاس بدیم. فکر کنم توضیحم گنگ بود بنابراین بهتره که به مثال توجه کنیم:</p><div class="language-cpp highlighter-rouge"><div class="highlight" style="direction: ltr; text-align: left;"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;memory&gt; // for std::unique_ptr and std::make_unique
#include &lt;iostream&gt;
</span>  
<span class="k">class</span> <span class="nc">Fraction</span>
<span class="p">{</span>
<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">m_numerator</span><span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>
    <span class="kt">int</span> <span class="n">m_denominator</span><span class="p">{</span> <span class="mi">1</span> <span class="p">};</span>
  
<span class="nl">public:</span>
    <span class="n">Fraction</span><span class="p">(</span><span class="kt">int</span> <span class="n">numerator</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="kt">int</span> <span class="n">denominator</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span>
        <span class="n">m_numerator</span><span class="p">{</span> <span class="n">numerator</span> <span class="p">},</span> <span class="n">m_denominator</span><span class="p">{</span> <span class="n">denominator</span> <span class="p">}</span>
    <span class="p">{</span>
    <span class="p">}</span>
  
    <span class="k">friend</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">,</span> <span class="k">const</span> <span class="n">Fraction</span> <span class="o">&amp;</span><span class="n">f1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="n">f1</span><span class="p">.</span><span class="n">m_numerator</span> <span class="o">&lt;&lt;</span> <span class="sc">'/'</span> <span class="o">&lt;&lt;</span> <span class="n">f1</span><span class="p">.</span><span class="n">m_denominator</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">out</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
  
  
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Create a single dynamically allocated Fraction with numerator 3 and denominator 5</span>
    <span class="c1">// We can also use automatic type deduction to good effect here</span>
    <span class="k">auto</span> <span class="n">f1</span><span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Fraction</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="p">};</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">f1</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>
  
    <span class="c1">// Create a dynamically allocated array of Fractions of length 4</span>
    <span class="k">auto</span> <span class="n">f2</span><span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Fraction</span><span class="p">[]</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">};</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">f2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>
  
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></span>&rlm;</div></div><p>خروجی کد هم:</p><div class="language-plaintext highlighter-rouge"><div class="highlight" style="direction: ltr; text-align: left;"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>3 / 5
0 / 1
</pre></table></code></span>&rlm;</div></div><p>درکل توصیه میشه که بجای اینکه مستقیما از <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;unique_ptr</code></span>&rlm; استفاده بشه، از این کلاس استفاده بشه.</p><p>هم بهینه تره و هم امن تر.</p><h2 id="پاس-دادن-unique_ptr-به-یک-تابع">پاس دادن <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;unique_ptr</code></span>&rlm; به یک تابع</h2><p>همونطور که بالاتر گفتم، این کلاس توابع مربوط به کپی رو غیرفعال کرده بنابراین با استفاده از move semantic ها، وقتی انتقال انجام میشه دیگه شئ اولیه مسئول مدیریت حافظه مربوطه نیست.</p><p>بنابراین اگر یک شئ از این کلاس رو با استفاده از move به یک تابع پاس بدیم، مالکیتش به شئ داخل تابع منتقل میشه و با تموم شدن کار اون تابع، حافظه ما هم (که در بیرون از تابع allocate شده) آزاد میشه.</p><p>برای جلوگیری از این مشکل بهتره که از تابع <span dir="ltr"><code class="language-plaintext highlighter-rouge">&lrm;get()</code></span>&rlm; استفاده بکنیم.</p><p>مثال زیر:</p><div class="language-cpp highlighter-rouge"><div class="highlight" style="direction: ltr; text-align: left;"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre><td class="rouge-code"><pre><span class="cp">#include &lt;memory&gt; // for std::unique_ptr
#include &lt;iostream&gt;
</span>  
<span class="k">class</span> <span class="nc">Resource</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Resource</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Resource acquired</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
    <span class="o">~</span><span class="n">Resource</span><span class="p">()</span> <span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Resource destroyed</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span> <span class="p">}</span>
  
    <span class="k">friend</span> <span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">out</span><span class="p">,</span> <span class="k">const</span> <span class="n">Resource</span> <span class="o">&amp;</span><span class="n">res</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">out</span> <span class="o">&lt;&lt;</span> <span class="s">"I am a resource</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
        <span class="k">return</span> <span class="n">out</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
  
<span class="c1">// The function only uses the resource, so we'll accept a pointer to the resource, not a reference to the whole std::unique_ptr&lt;Resource&gt;</span>
<span class="kt">void</span> <span class="nf">useResource</span><span class="p">(</span><span class="n">Resource</span> <span class="o">*</span><span class="n">res</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="o">*</span><span class="n">res</span> <span class="o">&lt;&lt;</span> <span class="sc">'\n'</span><span class="p">;</span>
<span class="p">}</span>
  
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">auto</span> <span class="n">ptr</span><span class="p">{</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">Resource</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">};</span>
  
    <span class="n">useResource</span><span class="p">(</span><span class="n">ptr</span><span class="p">.</span><span class="n">get</span><span class="p">());</span> <span class="c1">// note: get() used here to get a pointer to the Resource</span>
  
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Ending program</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
  
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> <span class="c1">// The Resource is destroyed here</span>
</pre></table></code></span>&rlm;</div></div><p>و خروجی کد هم به این زیبایی هست:</p><div class="language-plaintext highlighter-rouge"><div class="highlight" style="direction: ltr; text-align: left;"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>Resource acquired
I am a resource
Ending program
Resource destroyed
</pre></table></code></span>&rlm;</div></div><h2 id="پایان">پایان</h2><p>در آخر بهتره که بجای اشاره گر خام از اشاره گر هوشمند استفاده بکنیم و همچنین نکات مربوط به اونها رو یادمون بمونه:</p><ul><li>سعی کنیم از make_unique استفاده بکنیم<li>وقتی مدیریت یک اشاره گر رو به این کلاس می‌سپریم دیگه نباید اون اشاره گر رو به صورت دستی تغییر بدیم(آزاد کنیم یا هرچیز دیگه)<li>نباید دو یا چند شئ از این کلاس از یک حافظه یکسان نگهداری کنن</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%D8%B3%DB%8C/'>سی++</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/c/" class="post-tag no-text-decoration" >C++</a> <a href="/tags/make-unique/" class="post-tag no-text-decoration" >make_unique</a> <a href="/tags/smart-pointer/" class="post-tag no-text-decoration" >smart pointer</a> <a href="/tags/unique/" class="post-tag no-text-decoration" >unique</a> <a href="/tags/unique-ptr/" class="post-tag no-text-decoration" >unique_ptr</a> <a href="/tags/%D8%A7%D8%B4%D8%A7%D8%B1%D9%87-%DA%AF%D8%B1/" class="post-tag no-text-decoration" >اشاره گر</a> <a href="/tags/%D8%A7%D8%B4%D8%A7%D8%B1%D9%87-%DA%AF%D8%B1-%D9%87%D9%88%D8%B4%D9%85%D9%86%D8%AF/" class="post-tag no-text-decoration" >اشاره گر هوشمند</a> <a href="/tags/%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87-%D9%86%D9%88%DB%8C%D8%B3%DB%8C/" class="post-tag no-text-decoration" >برنامه نویسی</a> <a href="/tags/%D8%B3%DB%8C/" class="post-tag no-text-decoration" >سی++</a> <a href="/tags/%D8%B3%DB%8C-%D9%85%D8%AF%D8%B1%D9%86/" class="post-tag no-text-decoration" >سی++ مدرن</a> <a href="/tags/%D8%B3%DB%8C-%DB%B1%DB%B1/" class="post-tag no-text-decoration" >سی++ ۱۱</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> این پست تحت مجوز <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> منتشر شده است.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">اشتراک گذاری</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=اشاره گر های هوشمند: unique_ptr - سیدپولر&url=https://www.seedpuller.ir/posts/smart-poitners-unique-ptr/" data-toggle="tooltip" data-placement="top" title="توئیتر" target="_blank" rel="noopener" aria-label="توئیتر"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://telegram.me/share?text=اشاره گر های هوشمند: unique_ptr - سیدپولر&url=https://www.seedpuller.ir/posts/smart-poitners-unique-ptr/" data-toggle="tooltip" data-placement="top" title="تلگرام" target="_blank" rel="noopener" aria-label="تلگرام"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="کپی لینک پست"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/concurrency-in-cpp-chapter1/">همزمانی در سی++: مفاهیم اولیه</a><li><a href="/posts/concurrency-in-cpp-chapter3-5/">همزمانی در سی++(۵): جایگزین های mutex</a><li><a href="/posts/concurrency-in-cpp-chapter3-3/">همزمانی در سی++(۳): Dead Lock ها</a><li><a href="/posts/concurrency-in-cpp-chapter3-4/">همزمانی در سی++(۴): ژانگولر بازی با mutex و کارهای دیگر</a><li><a href="/posts/concurrency-in-cpp-chapter3-1/">همزمانی در سی++: اشتراک گذاری داده ها(۱)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/%D8%B3%DB%8C/">سی++</a> <a class="post-tag" href="/tags/inner-struggle/">Inner Struggle</a> <a class="post-tag" href="/tags/%D8%AF%D8%A7%DB%8C%D8%AA%D9%84/">دایتل</a> <a class="post-tag" href="/tags/%DB%8C%D8%A7%D8%AF%DA%AF%DB%8C%D8%B1%DB%8C/">یادگیری</a> <a class="post-tag" href="/tags/concurrency-in-action/">concurrency in action</a> <a class="post-tag" href="/tags/concurrent-processing/">concurrent processing</a> <a class="post-tag" href="/tags/%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87-%D9%86%D9%88%DB%8C%D8%B3%DB%8C-%DA%86%D9%86%D8%AF-%D9%86%D8%AE%DB%8C/">برنامه نویسی چند نخی</a> <a class="post-tag" href="/tags/%D8%B3%DB%8C-%DB%B1%DB%B7/">سی++۱۷</a> <a class="post-tag" href="/tags/%D9%85%D9%88%D8%A7%D8%B2%DB%8C-%DA%A9%D8%A7%D8%B1%DB%8C/">موازی کاری</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/smart-pointers-shared-ptr/"><div class="card-body"> <span class="timeago small" > Aug 27, 2020 <i class="unloaded">2020-08-27T00:00:00+04:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>اشاره گر های هوشمند: shared_ptr</h3><div class="text-muted small"><p> توی پست قبل درباره اینکه چرا باید از اشاره گر های هوشمند استفاده کنیم حرف زدم و کلاس std::unique_ptr رو بررسی سطحی کردیم. توی این پست قراره درباره نوع دیگه ای از اشاره گر های هوشمند بنویسم که برع...</p></div></div></a></div><div class="card"> <a href="/posts/deitel-chapter17-exception-handling/"><div class="card-body"> <span class="timeago small" > Jul 27, 2020 <i class="unloaded">2020-07-27T00:00:00+04:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>فصل ۱۷ دایتل: نگاهی عمیق تر به Exception Handling</h3><div class="text-muted small"><p> توی این فصل قراره نکات عمیق تری رو راجع به مدیریت استثنا ها یاد بگیریم بنابراین مفاهیم اولیه مثل اینکه exception چی هست و چرا باید استفاده بشه و چطور میشه یک استثنا برای خودمون بنویسیم رو ذکر نمی...</p></div></div></a></div><div class="card"> <a href="/posts/what-ive-learned-from-deitel-chapter10/"><div class="card-body"> <span class="timeago small" > Apr 7, 2020 <i class="unloaded">2020-04-07T00:00:00+04:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>نکاتِ جدیدی که از فصل ۱۰ سی++ دایتل یادگرفتم – نکاتی پراکنده</h3><div class="text-muted small"><p> خب فصل ۱۰ ام از کتاب برنامه نویسی سی++ دایتل رو تموم کردم. اینجا خلاصه ای از چیزای جدیدی که یادگرفتم رو می‌نویسم. string-object literal توی سی++ ۱۴ میشه با اضافه کردن یک s به انتهای لیترال رشته‌ا...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/multiple-inheritance-in-cpp/" class="btn btn-outline-primary" prompt="قبلی"><p>ارث بری چندگانه در سی++</p></a> <a href="/posts/smart-pointers-shared-ptr/" class="btn btn-outline-primary" prompt="بعدی"><p>اشاره گر های هوشمند: shared_ptr</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div><div class="footer-right" style="direction: rtl; text-align: right;"><p class="mb-0"> <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">مطالب این وبسایت تحت مجوز CC-BY-4.0 منتشر می‌شوند</span></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/%D8%B3%DB%8C/">سی++</a> <a class="post-tag" href="/tags/inner-struggle/">Inner Struggle</a> <a class="post-tag" href="/tags/%D8%AF%D8%A7%DB%8C%D8%AA%D9%84/">دایتل</a> <a class="post-tag" href="/tags/%DB%8C%D8%A7%D8%AF%DA%AF%DB%8C%D8%B1%DB%8C/">یادگیری</a> <a class="post-tag" href="/tags/concurrency-in-action/">concurrency in action</a> <a class="post-tag" href="/tags/concurrent-processing/">concurrent processing</a> <a class="post-tag" href="/tags/%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87-%D9%86%D9%88%DB%8C%D8%B3%DB%8C-%DA%86%D9%86%D8%AF-%D9%86%D8%AE%DB%8C/">برنامه نویسی چند نخی</a> <a class="post-tag" href="/tags/%D8%B3%DB%8C-%DB%B1%DB%B7/">سی++۱۷</a> <a class="post-tag" href="/tags/%D9%85%D9%88%D8%A7%D8%B2%DB%8C-%DA%A9%D8%A7%D8%B1%DB%8C/">موازی کاری</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://www.seedpuller.ir{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
